<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-system-design/chapter3" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Chapter 3 | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://imwito.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://imwito.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://imwito.github.io/docs/system-design/chapter3"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chapter 3 | My Site"><meta data-rh="true" name="description" content="N-tier architecture"><meta data-rh="true" property="og:description" content="N-tier architecture"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://imwito.github.io/docs/system-design/chapter3"><link data-rh="true" rel="alternate" href="https://imwito.github.io/docs/system-design/chapter3" hreflang="en"><link data-rh="true" rel="alternate" href="https://imwito.github.io/zh-Hans/docs/system-design/chapter3" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://imwito.github.io/docs/system-design/chapter3" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.466a89db.css">
<link rel="preload" href="/assets/js/runtime~main.c8929489.js" as="script">
<link rel="preload" href="/assets/js/main.ece51ca9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/imwito/imwito.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/system-design/chapter3" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-Hans/docs/system-design/chapter3" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/system-design">System Design</a><button aria-label="Toggle the collapsible sidebar category &#x27;System Design&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/chapter1">Chapter 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/chapter2">Chapter 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/system-design/chapter3">Chapter 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/chapter4">Chapter 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system-design/chapter5">Chapter 5</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorial - Basics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorial - Extras&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/system-design"><span itemprop="name">System Design</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Chapter 3</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Chapter 3</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="n-tier-architecture">N-tier architecture<a href="#n-tier-architecture" class="hash-link" aria-label="Direct link to N-tier architecture" title="Direct link to N-tier architecture">​</a></h2><p>N-tier architecture divides an application into logical layers and physical tiers. Layers are a way to separate responsibilities and manage dependencies. Each layer has a specific responsibility. A higher layer can use services in a lower layer, but not the other way around.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/n-tier-architecture/n-tier-architecture.png" alt="n-tier-architecture" class="img_ev3q"></p><p>Tiers are physically separated, running on separate machines. A tier can call to another tier directly, or use asynchronous messaging. Although each layer might be hosted in its own tier, that&#x27;s not required. Several layers might be hosted on the same tier. Physically separating the tiers improves scalability and resiliency and adds latency from the additional network communication.</p><p>An N-tier architecture can be of two types:</p><ul><li>In a closed layer architecture, a layer can only call the next layer immediately down.</li><li>In an open layer architecture, a layer can call any of the layers below it.</li></ul><p>A closed-layer architecture limits the dependencies between layers. However, it might create unnecessary network traffic, if one layer simply passes requests along to the next layer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="types-of-n-tier-architectures">Types of N-Tier architectures<a href="#types-of-n-tier-architectures" class="hash-link" aria-label="Direct link to Types of N-Tier architectures" title="Direct link to Types of N-Tier architectures">​</a></h3><p>Let&#x27;s look at some examples of N-Tier architecture:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-tier-architecture">3-Tier architecture<a href="#3-tier-architecture" class="hash-link" aria-label="Direct link to 3-Tier architecture" title="Direct link to 3-Tier architecture">​</a></h4><p>3-Tier is widely used and consists of the following different layers:</p><ul><li><strong>Presentation layer</strong>: Handles user interactions with the application.</li><li><strong>Business Logic layer</strong>: Accepts the data from the application layer, validates it as per business logic and passes it to the data layer.</li><li><strong>Data Access layer</strong>: Receives the data from the business layer and performs the necessary operation on the database.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-tier-architecture">2-Tier architecture<a href="#2-tier-architecture" class="hash-link" aria-label="Direct link to 2-Tier architecture" title="Direct link to 2-Tier architecture">​</a></h4><p>In this architecture, the presentation layer runs on the client and communicates with a data store. There is no business logic layer or immediate layer between client and server.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="single-tier-or-1-tier-architecture">Single Tier or 1-Tier architecture<a href="#single-tier-or-1-tier-architecture" class="hash-link" aria-label="Direct link to Single Tier or 1-Tier architecture" title="Direct link to Single Tier or 1-Tier architecture">​</a></h4><p>It is the simplest one as it is equivalent to running the application on a personal computer. All of the required components for an application to run are on a single application or server.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages">Advantages<a href="#advantages" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3><p>Here are some advantages of using N-tier architecture:</p><ul><li>Can improve availability.</li><li>Better security as layers can behave like a firewall.</li><li>Separate tiers allow us to scale them as needed.</li><li>Improve maintenance as different people can manage different tiers.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages">Disadvantages<a href="#disadvantages" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h3><p>Below are some disadvantages of N-tier architecture:</p><ul><li>Increased complexity of the system as a whole.</li><li>Increased network latency as the number of tiers increases.</li><li>Expensive as every tier will have its own hardware cost.</li><li>Difficult to manage network security.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-brokers">Message Brokers<a href="#message-brokers" class="hash-link" aria-label="Direct link to Message Brokers" title="Direct link to Message Brokers">​</a></h2><p>A message broker is a software that enables applications, systems, and services to communicate with each other and exchange information. The message broker does this by translating messages between formal messaging protocols. This allows interdependent services to <em>&quot;talk&quot;</em> with one another directly, even if they were written in different languages or implemented on different platforms.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/message-brokers/message-broker.png" alt="message-broker" class="img_ev3q"></p><p>Message brokers can validate, store, route, and deliver messages to the appropriate destinations. They serve as intermediaries between other applications, allowing senders to issue messages without knowing where the receivers are, whether or not they are active, or how many of them there are. This facilitates the decoupling of processes and services within systems.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="models">Models<a href="#models" class="hash-link" aria-label="Direct link to Models" title="Direct link to Models">​</a></h3><p>Message brokers offer two basic message distribution patterns or messaging styles:</p><ul><li><strong><a href="https://karanpratapsingh.com/courses/system-design/message-queues" target="_blank" rel="noopener noreferrer">Point-to-Point messaging</a></strong>: This is the distribution pattern utilized in message queues with a one-to-one relationship between the message&#x27;s sender and receiver.</li><li><strong><a href="https://karanpratapsingh.com/courses/system-design/publish-subscribe" target="_blank" rel="noopener noreferrer">Publish-subscribe messaging</a></strong>: In this message distribution pattern, often referred to as <em>&quot;pub/sub&quot;</em>, the producer of each message publishes it to a topic, and multiple message consumers subscribe to topics from which they want to receive messages.</li></ul><p><em>We will discuss these messaging patterns in detail in the later tutorials.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-brokers-vs-event-streaming">Message brokers vs Event streaming<a href="#message-brokers-vs-event-streaming" class="hash-link" aria-label="Direct link to Message brokers vs Event streaming" title="Direct link to Message brokers vs Event streaming">​</a></h3><p>Message brokers can support two or more messaging patterns, including message queues and pub/sub, while event streaming platforms only offer pub/sub-style distribution patterns. Designed for use with high volumes of messages, event streaming platforms are readily scalable. They&#x27;re capable of ordering streams of records into categories called <em>topics</em> and storing them for a predetermined amount of time. Unlike message brokers, however, event streaming platforms cannot guarantee message delivery or track which consumers have received the messages.</p><p>Event streaming platforms offer more scalability than message brokers but fewer features that ensure fault tolerance like message resending, as well as more limited message routing and queueing capabilities.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-brokers-vs-enterprise-service-bus-esb">Message brokers vs Enterprise Service Bus (ESB)<a href="#message-brokers-vs-enterprise-service-bus-esb" class="hash-link" aria-label="Direct link to Message brokers vs Enterprise Service Bus (ESB)" title="Direct link to Message brokers vs Enterprise Service Bus (ESB)">​</a></h3><p><a href="https://karanpratapsingh.com/courses/system-design/enterprise-service-bus" target="_blank" rel="noopener noreferrer">Enterprise Service Bus (ESB)</a> infrastructure is complex and can be challenging to integrate and expensive to maintain. It&#x27;s difficult to troubleshoot them when problems occur in production environments, they&#x27;re not easy to scale, and updating is tedious.</p><p>Whereas message brokers are a <em>&quot;lightweight&quot;</em> alternative to ESBs that provide similar functionality, a mechanism for inter-service communication, at a lower cost. They&#x27;re well-suited for use in the <a href="https://karanpratapsingh.com/courses/system-design/monoliths-microservices#microservices" target="_blank" rel="noopener noreferrer">microservices architectures</a> that have become more prevalent as ESBs have fallen out of favor.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3><p>Here are some commonly used message brokers:</p><ul><li><a href="https://nats.io" target="_blank" rel="noopener noreferrer">NATS</a></li><li><a href="https://kafka.apache.org" target="_blank" rel="noopener noreferrer">Apache Kafka</a></li><li><a href="https://www.rabbitmq.com" target="_blank" rel="noopener noreferrer">RabbitMQ</a></li><li><a href="https://activemq.apache.org" target="_blank" rel="noopener noreferrer">ActiveMQ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-queues">Message Queues<a href="#message-queues" class="hash-link" aria-label="Direct link to Message Queues" title="Direct link to Message Queues">​</a></h2><p>A message queue is a form of service-to-service communication that facilitates asynchronous communication. It asynchronously receives messages from producers and sends them to consumers.</p><p>Queues are used to effectively manage requests in large-scale distributed systems. In small systems with minimal processing loads and small databases, writes can be predictably fast. However, in more complex and large systems writes can take an almost non-deterministic amount of time.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/message-queues/message-queue.png" alt="message-queue" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="working">Working<a href="#working" class="hash-link" aria-label="Direct link to Working" title="Direct link to Working">​</a></h3><p>Messages are stored in the queue until they are processed and deleted. Each message is processed only once by a single consumer. Here&#x27;s how it works:</p><ul><li>A producer publishes a job to the queue, then notifies the user of the job status.</li><li>A consumer picks up the job from the queue, processes it, then signals that the job is complete.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-1">Advantages<a href="#advantages-1" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3><p>Let&#x27;s discuss some advantages of using a message queue:</p><ul><li><strong>Scalability</strong>: Message queues make it possible to scale precisely where we need to. When workloads peak, multiple instances of our application can add all requests to the queue without the risk of collision.</li><li><strong>Decoupling</strong>: Message queues remove dependencies between components and significantly simplify the implementation of decoupled applications.</li><li><strong>Performance</strong>: Message queues enable asynchronous communication, which means that the endpoints that are producing and consuming messages interact with the queue, not each other. Producers can add requests to the queue without waiting for them to be processed.</li><li><strong>Reliability</strong>: Queues make our data persistent, and reduce the errors that happen when different parts of our system go offline.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><p>Now, let&#x27;s discuss some desired features of message queues:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="push-or-pull-delivery">Push or Pull Delivery<a href="#push-or-pull-delivery" class="hash-link" aria-label="Direct link to Push or Pull Delivery" title="Direct link to Push or Pull Delivery">​</a></h4><p>Most message queues provide both push and pull options for retrieving messages. Pull means continuously querying the queue for new messages. Push means that a consumer is notified when a message is available. We can also use long-polling to allow pulls to wait a specified amount of time for new messages to arrive.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="fifo-first-in-first-out-queues">FIFO (First-In-First-Out) Queues<a href="#fifo-first-in-first-out-queues" class="hash-link" aria-label="Direct link to FIFO (First-In-First-Out) Queues" title="Direct link to FIFO (First-In-First-Out) Queues">​</a></h4><p>In these queues, the oldest (or first) entry, sometimes called the <em>&quot;head&quot;</em> of the queue, is processed first.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="schedule-or-delay-delivery">Schedule or Delay Delivery<a href="#schedule-or-delay-delivery" class="hash-link" aria-label="Direct link to Schedule or Delay Delivery" title="Direct link to Schedule or Delay Delivery">​</a></h4><p>Many message queues support setting a specific delivery time for a message. If we need to have a common delay for all messages, we can set up a delay queue.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="at-least-once-delivery">At-Least-Once Delivery<a href="#at-least-once-delivery" class="hash-link" aria-label="Direct link to At-Least-Once Delivery" title="Direct link to At-Least-Once Delivery">​</a></h4><p>Message queues may store multiple copies of messages for redundancy and high availability, and resend messages in the event of communication failures or errors to ensure they are delivered at least once.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="exactly-once-delivery">Exactly-Once Delivery<a href="#exactly-once-delivery" class="hash-link" aria-label="Direct link to Exactly-Once Delivery" title="Direct link to Exactly-Once Delivery">​</a></h4><p>When duplicates can&#x27;t be tolerated, FIFO (first-in-first-out) message queues will make sure that each message is delivered exactly once (and only once) by filtering out duplicates automatically.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dead-letter-queues">Dead-letter Queues<a href="#dead-letter-queues" class="hash-link" aria-label="Direct link to Dead-letter Queues" title="Direct link to Dead-letter Queues">​</a></h4><p>A dead-letter queue is a queue to which other queues can send messages that can&#x27;t be processed successfully. This makes it easy to set them aside for further inspection without blocking the queue processing or spending CPU cycles on a message that might never be consumed successfully.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ordering">Ordering<a href="#ordering" class="hash-link" aria-label="Direct link to Ordering" title="Direct link to Ordering">​</a></h4><p>Most message queues provide best-effort ordering which ensures that messages are generally delivered in the same order as they&#x27;re sent and that a message is delivered at least once.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="poison-pill-messages">Poison-pill Messages<a href="#poison-pill-messages" class="hash-link" aria-label="Direct link to Poison-pill Messages" title="Direct link to Poison-pill Messages">​</a></h4><p>Poison pills are special messages that can be received, but not processed. They are a mechanism used in order to signal a consumer to end its work so it is no longer waiting for new inputs, and are similar to closing a socket in a client/server model.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a href="#security" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">​</a></h4><p>Message queues will authenticate applications that try to access the queue, this allows us to encrypt messages over the network as well as in the queue itself.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="task-queues">Task Queues<a href="#task-queues" class="hash-link" aria-label="Direct link to Task Queues" title="Direct link to Task Queues">​</a></h4><p>Tasks queues receive tasks and their related data, run them, then deliver their results. They can support scheduling and can be used to run computationally-intensive jobs in the background.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backpressure">Backpressure<a href="#backpressure" class="hash-link" aria-label="Direct link to Backpressure" title="Direct link to Backpressure">​</a></h3><p>If queues start to grow significantly, the queue size can become larger than memory, resulting in cache misses, disk reads, and even slower performance. Backpressure can help by limiting the queue size, thereby maintaining a high throughput rate and good response times for jobs already in the queue. Once the queue fills up, clients get a server busy or HTTP 503 status code to try again later. Clients can retry the request at a later time, perhaps with <a href="https://en.wikipedia.org/wiki/Exponential_backoff" target="_blank" rel="noopener noreferrer">exponential backoff</a> strategy.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-1">Examples<a href="#examples-1" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3><p>Following are some widely used message queues:</p><ul><li><a href="https://aws.amazon.com/sqs" target="_blank" rel="noopener noreferrer">Amazon SQS</a></li><li><a href="https://www.rabbitmq.com" target="_blank" rel="noopener noreferrer">RabbitMQ</a></li><li><a href="https://activemq.apache.org" target="_blank" rel="noopener noreferrer">ActiveMQ</a></li><li><a href="https://zeromq.org" target="_blank" rel="noopener noreferrer">ZeroMQ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="publish-subscribe">Publish-Subscribe<a href="#publish-subscribe" class="hash-link" aria-label="Direct link to Publish-Subscribe" title="Direct link to Publish-Subscribe">​</a></h2><p>Similar to a message queue, publish-subscribe is also a form of service-to-service communication that facilitates asynchronous communication. In a pub/sub model, any message published to a topic is pushed immediately to all the subscribers of the topic.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/publish-subscribe/publish-subscribe.png" alt="publish-subscribe" class="img_ev3q"></p><p>The subscribers to the message topic often perform different functions, and can each do something different with the message in parallel. The publisher doesn&#x27;t need to know who is using the information that it is broadcasting, and the subscribers don&#x27;t need to know where the message comes from. This style of messaging is a bit different than message queues, where the component that sends the message often knows the destination it is sending to.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="working-1">Working<a href="#working-1" class="hash-link" aria-label="Direct link to Working" title="Direct link to Working">​</a></h3><p>Unlike message queues, which batch messages until they are retrieved, message topics transfer messages with little or no queuing and push them out immediately to all subscribers. Here&#x27;s how it works:</p><ul><li>A message topic provides a lightweight mechanism to broadcast asynchronous event notifications and endpoints that allow software components to connect to the topic in order to send and receive those messages.</li><li>To broadcast a message, a component called a <em>publisher</em> simply pushes a message to the topic.</li><li>All components that subscribe to the topic (known as <em>subscribers</em>) will receive every message that was broadcasted.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-2">Advantages<a href="#advantages-2" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3><p>Let&#x27;s discuss some advantages of using publish-subscribe:</p><ul><li><strong>Eliminate Polling</strong>: Message topics allow instantaneous, push-based delivery, eliminating the need for message consumers to periodically check or <em>&quot;poll&quot;</em> for new information and updates. This promotes faster response time and reduces the delivery latency which can be particularly problematic in systems where delays cannot be tolerated.</li><li><strong>Dynamic Targeting</strong>: Pub/Sub makes the discovery of services easier, more natural, and less error-prone. Instead of maintaining a roster of peers where an application can send messages, a publisher will simply post messages to a topic. Then, any interested party will subscribe its endpoint to the topic, and start receiving these messages. Subscribers can change, upgrade, multiply or disappear and the system dynamically adjusts.</li><li><strong>Decoupled and Independent Scaling</strong>: Publishers and subscribers are decoupled and work independently from each other, which allows us to develop and scale them independently.</li><li><strong>Simplify Communication</strong>: The Publish-Subscribe model reduces complexity by removing all the point-to-point connections with a single connection to a message topic, which will manage subscriptions and decide what messages should be delivered to which endpoints.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-1">Features<a href="#features-1" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><p>Now, let&#x27;s discuss some desired features of publish-subscribe:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="push-delivery">Push Delivery<a href="#push-delivery" class="hash-link" aria-label="Direct link to Push Delivery" title="Direct link to Push Delivery">​</a></h4><p>Pub/Sub messaging instantly pushes asynchronous event notifications when messages are published to the message topic. Subscribers are notified when a message is available.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-delivery-protocols">Multiple Delivery Protocols<a href="#multiple-delivery-protocols" class="hash-link" aria-label="Direct link to Multiple Delivery Protocols" title="Direct link to Multiple Delivery Protocols">​</a></h4><p>In the Publish-Subscribe model, topics can typically connect to multiple types of endpoints, such as message queues, serverless functions, HTTP servers, etc.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="fanout">Fanout<a href="#fanout" class="hash-link" aria-label="Direct link to Fanout" title="Direct link to Fanout">​</a></h4><p>This scenario happens when a message is sent to a topic and then replicated and pushed to multiple endpoints. Fanout provides asynchronous event notifications which in turn allows for parallel processing.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="filtering">Filtering<a href="#filtering" class="hash-link" aria-label="Direct link to Filtering" title="Direct link to Filtering">​</a></h4><p>This feature empowers the subscriber to create a message filtering policy so that it will only get the notifications it is interested in, as opposed to receiving every single message posted to the topic.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="durability">Durability<a href="#durability" class="hash-link" aria-label="Direct link to Durability" title="Direct link to Durability">​</a></h4><p>Pub/Sub messaging services often provide very high durability, and at least once delivery, by storing copies of the same message on multiple servers.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="security-1">Security<a href="#security-1" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">​</a></h4><p>Message topics authenticate applications that try to publish content, this allows us to use encrypted endpoints and encrypt messages in transit over the network.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-2">Examples<a href="#examples-2" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3><p>Here are some commonly used publish-subscribe technologies:</p><ul><li><a href="https://aws.amazon.com/sns" target="_blank" rel="noopener noreferrer">Amazon SNS</a></li><li><a href="https://cloud.google.com/pubsub" target="_blank" rel="noopener noreferrer">Google Pub/Sub</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enterprise-service-bus-esb">Enterprise Service Bus (ESB)<a href="#enterprise-service-bus-esb" class="hash-link" aria-label="Direct link to Enterprise Service Bus (ESB)" title="Direct link to Enterprise Service Bus (ESB)">​</a></h2><p>An Enterprise Service Bus (ESB) is an architectural pattern whereby a centralized software component performs integrations between applications. It performs transformations of data models, handles connectivity, performs message routing, converts communication protocols, and potentially manages the composition of multiple requests. The ESB can make these integrations and transformations available as a service interface for reuse by new applications.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/enterprise-service-bus/enterprise-service-bus.png" alt="enterprise-service-bus" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-3">Advantages<a href="#advantages-3" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3><p>In theory, a centralized ESB offers the potential to standardize and dramatically simplify communication, messaging, and integration between services across the enterprise. Here are some advantages of using an ESB:</p><ul><li><strong>Improved developer productivity</strong>: Enables developers to incorporate new technologies into one part of an application without touching the rest of the application.</li><li><strong>Simpler, more cost-effective scalability</strong>: Components can be scaled independently of others.</li><li><strong>Greater resilience</strong>: Failure of one component does not impact the others, and each microservice can adhere to its own availability requirements without risking the availability of other components in the system.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-1">Disadvantages<a href="#disadvantages-1" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h3><p>While ESBs were deployed successfully in many organizations, in many other organizations the ESB came to be seen as a bottleneck. Here are some disadvantages of using an ESB:</p><ul><li>Making changes or enhancements to one integration could destabilize others who use that same integration.</li><li>A single point of failure can bring down all communications.</li><li>Updates to the ESB often impact existing integrations, so there is significant testing required to perform any update.</li><li>ESB is centrally managed which makes cross-team collaboration challenging.</li><li>High configuration and maintenance complexity.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-3">Examples<a href="#examples-3" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3><p>Below are some widely used Enterprise Service Bus (ESB) technologies:</p><ul><li><a href="https://azure.microsoft.com/en-in/services/service-bus" target="_blank" rel="noopener noreferrer">Azure Service Bus</a></li><li><a href="https://www.ibm.com/in-en/cloud/app-connect" target="_blank" rel="noopener noreferrer">IBM App Connect</a></li><li><a href="https://camel.apache.org" target="_blank" rel="noopener noreferrer">Apache Camel</a></li><li><a href="https://www.redhat.com/en/technologies/jboss-middleware/fuse" target="_blank" rel="noopener noreferrer">Fuse ESB</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monoliths-and-microservices">Monoliths and Microservices<a href="#monoliths-and-microservices" class="hash-link" aria-label="Direct link to Monoliths and Microservices" title="Direct link to Monoliths and Microservices">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="monoliths">Monoliths<a href="#monoliths" class="hash-link" aria-label="Direct link to Monoliths" title="Direct link to Monoliths">​</a></h3><p>A monolith is a self-contained and independent application. It is built as a single unit and is responsible for not just a particular task, but can perform every step needed to satisfy a business need.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/monoliths-microservices/monolith.png" alt="monolith" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-4">Advantages<a href="#advantages-4" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h4><p>Following are some advantages of monoliths:</p><ul><li>Simple to develop or debug.</li><li>Fast and reliable communication.</li><li>Easy monitoring and testing.</li><li>Supports ACID transactions.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-2">Disadvantages<a href="#disadvantages-2" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h4><p>Some common disadvantages of monoliths are:</p><ul><li>Maintenance becomes hard as the codebase grows.</li><li>Tightly coupled application, hard to extend.</li><li>Requires commitment to a particular technology stack.</li><li>On each update, the entire application is redeployed.</li><li>Reduced reliability as a single bug can bring down the entire system.</li><li>Difficult to scale or adopt new technologies.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modular-monoliths">Modular Monoliths<a href="#modular-monoliths" class="hash-link" aria-label="Direct link to Modular Monoliths" title="Direct link to Modular Monoliths">​</a></h3><p>A Modular Monolith is an approach where we build and deploy a single application (that&#x27;s the <em>Monolith</em> part), but we build it in a way that breaks up the code into independent modules for each of the features needed in our application.</p><p>This approach reduces the dependencies of a module in such as way that we can enhance or change a module without affecting other modules. When done right, this can be really beneficial in the long term as it reduces the complexity that comes with maintaining a monolith as the system grows.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="microservices">Microservices<a href="#microservices" class="hash-link" aria-label="Direct link to Microservices" title="Direct link to Microservices">​</a></h3><p>A microservices architecture consists of a collection of small, autonomous services where each service is self-contained and should implement a single business capability within a bounded context. A bounded context is a natural division of business logic that provides an explicit boundary within which a domain model exists.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/monoliths-microservices/microservices.png" alt="microservices" class="img_ev3q"></p><p>Each service has a separate codebase, which can be managed by a small development team. Services can be deployed independently and a team can update an existing service without rebuilding and redeploying the entire application.</p><p>Services are responsible for persisting their own data or external state (database per service). This differs from the traditional model, where a separate data layer handles data persistence.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="characteristics">Characteristics<a href="#characteristics" class="hash-link" aria-label="Direct link to Characteristics" title="Direct link to Characteristics">​</a></h4><p>The microservices architecture style has the following characteristics:</p><ul><li><strong>Loosely coupled</strong>: Services should be loosely coupled so that they can be independently deployed and scaled. This will lead to the decentralization of development teams and thus, enabling them to develop and deploy faster with minimal constraints and operational dependencies.</li><li><strong>Small but focused</strong>: It&#x27;s about scope and responsibilities and not size, a service should be focused on a specific problem. Basically, <em>&quot;It does one thing and does it well&quot;</em>. Ideally, they can be independent of the underlying architecture.</li><li><strong>Built for businesses</strong>: The microservices architecture is usually organized around business capabilities and priorities.</li><li><strong>Resilience &amp; Fault tolerance</strong>: Services should be designed in such a way that they still function in case of failure or errors. In environments with independently deployable services, failure tolerance is of the highest importance.</li><li><strong>Highly maintainable</strong>: Service should be easy to maintain and test because services that cannot be maintained will be rewritten.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-5">Advantages<a href="#advantages-5" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h4><p>Here are some advantages of microservices architecture:</p><ul><li>Loosely coupled services.</li><li>Services can be deployed independently.</li><li>Highly agile for multiple development teams.</li><li>Improves fault tolerance and data isolation.</li><li>Better scalability as each service can be scaled independently.</li><li>Eliminates any long-term commitment to a particular technology stack.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-3">Disadvantages<a href="#disadvantages-3" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h4><p>Microservices architecture brings its own set of challenges:</p><ul><li>Complexity of a distributed system.</li><li>Testing is more difficult.</li><li>Expensive to maintain (individual servers, databases, etc.).</li><li>Inter-service communication has its own challenges.</li><li>Data integrity and consistency.</li><li>Network congestion and latency.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best practices" title="Direct link to Best practices">​</a></h4><p>Let&#x27;s discuss some microservices best practices:</p><ul><li>Model services around the business domain.</li><li>Services should have loose coupling and high functional cohesion.</li><li>Isolate failures and use resiliency strategies to prevent failures within a service from cascading.</li><li>Services should only communicate through well-designed APIs. Avoid leaking implementation details.</li><li>Data storage should be private to the service that owns the data</li><li>Avoid coupling between services. Causes of coupling include shared database schemas and rigid communication protocols.</li><li>Decentralize everything. Individual teams are responsible for designing and building services. Avoid sharing code or data schemas.</li><li>Fail fast by using a <a href="https://karanpratapsingh.com/courses/system-design/circuit-breaker" target="_blank" rel="noopener noreferrer">circuit breaker</a> to achieve fault tolerance.</li><li>Ensure that the API changes are backward compatible.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pitfalls">Pitfalls<a href="#pitfalls" class="hash-link" aria-label="Direct link to Pitfalls" title="Direct link to Pitfalls">​</a></h4><p>Below are some common pitfalls of microservices architecture:</p><ul><li>Service boundaries are not based on the business domain.</li><li>Underestimating how hard is to build a distributed system.</li><li>Shared database or common dependencies between services.</li><li>Lack of Business Alignment.</li><li>Lack of clear ownership.</li><li>Lack of idempotency.</li><li>Trying to do everything <a href="https://karanpratapsingh.com/courses/system-design/acid-and-base-consistency-models" target="_blank" rel="noopener noreferrer">ACID instead of BASE</a>.</li><li>Lack of design for fault tolerance may result in cascading failures.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="beware-of-the-distributed-monolith">Beware of the distributed monolith<a href="#beware-of-the-distributed-monolith" class="hash-link" aria-label="Direct link to Beware of the distributed monolith" title="Direct link to Beware of the distributed monolith">​</a></h3><p>Distributed Monolith is a system that resembles the microservices architecture but is tightly coupled within itself like a monolithic application. Adopting microservices architecture comes with a lot of advantages. But while making one, there are good chances that we might end up with a distributed monolith.</p><p>Our microservices are just a distributed monolith if any of these apply to it:</p><ul><li>Requires low latency communication.</li><li>Services don&#x27;t scale easily.</li><li>Dependency between services.</li><li>Sharing the same resources such as databases.</li><li>Tightly coupled systems.</li></ul><p>One of the primary reasons to build an application using microservices architecture is to have scalability. Therefore, microservices should have loosely coupled services which enable every service to be independent. The distributed monolith architecture takes this away and causes most components to depend on one another, increasing design complexity.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="microservices-vs-service-oriented-architecture-soa">Microservices vs Service-oriented architecture (SOA)<a href="#microservices-vs-service-oriented-architecture-soa" class="hash-link" aria-label="Direct link to Microservices vs Service-oriented architecture (SOA)" title="Direct link to Microservices vs Service-oriented architecture (SOA)">​</a></h3><p>You might have seen <em>Service-oriented architecture (SOA)</em> mentioned around the internet, sometimes even interchangeably with microservices, but they are different from each other and the main distinction between the two approaches comes down to <em>scope</em>.</p><p>Service-oriented architecture (SOA) defines a way to make software components reusable via service interfaces. These interfaces utilize common communication standards and focus on maximizing application service reusability whereas microservices are built as a collection of various smallest independent service units focused on team autonomy and decoupling.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-you-dont-need-microservices">Why you don&#x27;t need microservices<a href="#why-you-dont-need-microservices" class="hash-link" aria-label="Direct link to Why you don&#x27;t need microservices" title="Direct link to Why you don&#x27;t need microservices">​</a></h3><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/monoliths-microservices/architecture-range.png" alt="architecture-range" class="img_ev3q"></p><p>So, you might be wondering, monoliths seem like a bad idea to begin with, why would anyone use that?</p><p>Well, it depends. While each approach has its own advantages and disadvantages, it is advised to start with a monolith when building a new system. It is important to understand, that microservices are not a silver bullet, instead, they solve an organizational problem. Microservices architecture is about your organizational priorities and team as much as it&#x27;s about technology.</p><p>Before making the decision to move to microservices architecture, you need to ask yourself questions like:</p><ul><li><em>&quot;Is the team too large to work effectively on a shared codebase?&quot;</em></li><li><em>&quot;Are teams blocked on other teams?&quot;</em></li><li><em>&quot;Does microservices deliver clear business value for us?&quot;</em></li><li><em>&quot;Is my business mature enough to use microservices?&quot;</em></li><li><em>&quot;Is our current architecture limiting us with communication overhead?&quot;</em></li></ul><p>If your application does not require to be broken down into microservices, you don&#x27;t need this. There is no absolute necessity that all applications should be broken down into microservices.</p><p>We frequently draw inspiration from companies such as Netflix and their use of microservices, but we overlook the fact that we are not Netflix. They went through a lot of iterations and models before they had a market-ready solution, and this architecture became acceptable for them when they identified and solved the problem they were trying to tackle.</p><p>That&#x27;s why it&#x27;s essential to understand in-depth if your business <em>actually</em> needs microservices. What I&#x27;m trying to say is microservices are solutions to complex concerns and if your business doesn&#x27;t have complex issues, you don&#x27;t need them.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-driven-architecture-eda">Event-Driven Architecture (EDA)<a href="#event-driven-architecture-eda" class="hash-link" aria-label="Direct link to Event-Driven Architecture (EDA)" title="Direct link to Event-Driven Architecture (EDA)">​</a></h2><p>Event-Driven Architecture (EDA) is about using events as a way to communicate within a system. Generally, leveraging a message broker to publish and consume events asynchronously. The publisher is unaware of who is consuming an event and the consumers are unaware of each other. Event-Driven Architecture is simply a way of achieving loose coupling between services within a system.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-an-event">What is an event?<a href="#what-is-an-event" class="hash-link" aria-label="Direct link to What is an event?" title="Direct link to What is an event?">​</a></h3><p>An event is a data point that represents state changes in a system. It doesn&#x27;t specify what should happen and how the change should modify the system, it only notifies the system of a particular state change. When a user makes an action, they trigger an event.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="components">Components<a href="#components" class="hash-link" aria-label="Direct link to Components" title="Direct link to Components">​</a></h3><p>Event-driven architectures have three key components:</p><ul><li><strong>Event producers</strong>: Publishes an event to the router.</li><li><strong>Event routers</strong>: Filters and pushes the events to consumers.</li><li><strong>Event consumers</strong>: Uses events to reflect changes in the system.</li></ul><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/event-driven-architecture/event-driven-architecture.png" alt="event-driven-architecture" class="img_ev3q"></p><p><em>Note: Dots in the diagram represents different events in the system.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="patterns">Patterns<a href="#patterns" class="hash-link" aria-label="Direct link to Patterns" title="Direct link to Patterns">​</a></h3><p>There are several ways to implement the event-driven architecture, and which method we use depends on the use case but here are some common examples:</p><ul><li><a href="https://karanpratapsingh.com/courses/system-design/distributed-transactions#sagas" target="_blank" rel="noopener noreferrer">Sagas</a></li><li><a href="https://karanpratapsingh.com/courses/system-design/publish-subscribe" target="_blank" rel="noopener noreferrer">Publish-Subscribe</a></li><li><a href="https://karanpratapsingh.com/courses/system-design/event-sourcing" target="_blank" rel="noopener noreferrer">Event Sourcing</a></li><li><a href="https://karanpratapsingh.com/courses/system-design/command-and-query-responsibility-segregation" target="_blank" rel="noopener noreferrer">Command and Query Responsibility Segregation (CQRS)</a></li></ul><p><em>Note: Each of these methods is discussed separately.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-6">Advantages<a href="#advantages-6" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3><p>Let&#x27;s discuss some advantages:</p><ul><li>Decoupled producers and consumers.</li><li>Highly scalable and distributed.</li><li>Easy to add new consumers.</li><li>Improves agility.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="challenges">Challenges<a href="#challenges" class="hash-link" aria-label="Direct link to Challenges" title="Direct link to Challenges">​</a></h3><p>Here are some challenges of event-drive architecture:</p><ul><li>Guaranteed delivery.</li><li>Error handling is difficult.</li><li>Event-driven systems are complex in general.</li><li>Exactly once, in-order processing of events.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use cases<a href="#use-cases" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">​</a></h3><p>Below are some common use cases where event-driven architectures are beneficial:</p><ul><li>Metadata and metrics.</li><li>Server and security logs.</li><li>Integrating heterogeneous systems.</li><li>Fanout and parallel processing.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-4">Examples<a href="#examples-4" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3><p>Here are some widely used technologies for implementing event-driven architectures:</p><ul><li><a href="https://nats.io" target="_blank" rel="noopener noreferrer">NATS</a></li><li><a href="https://kafka.apache.org" target="_blank" rel="noopener noreferrer">Apache Kafka</a></li><li><a href="https://aws.amazon.com/eventbridge" target="_blank" rel="noopener noreferrer">Amazon EventBridge</a></li><li><a href="https://aws.amazon.com/sns" target="_blank" rel="noopener noreferrer">Amazon SNS</a></li><li><a href="https://cloud.google.com/pubsub" target="_blank" rel="noopener noreferrer">Google PubSub</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-sourcing">Event Sourcing<a href="#event-sourcing" class="hash-link" aria-label="Direct link to Event Sourcing" title="Direct link to Event Sourcing">​</a></h2><p>Instead of storing just the current state of the data in a domain, use an append-only store to record the full series of actions taken on that data. The store acts as the system of record and can be used to materialize the domain objects.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/event-sourcing/event-sourcing.png" alt="event-sourcing" class="img_ev3q"></p><p>This can simplify tasks in complex domains, by avoiding the need to synchronize the data model and the business domain, while improving performance, scalability, and responsiveness. It can also provide consistency for transactional data, and maintain full audit trails and history that can enable compensating actions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-sourcing-vs-event-driven-architecture-eda">Event sourcing vs Event-Driven Architecture (EDA)<a href="#event-sourcing-vs-event-driven-architecture-eda" class="hash-link" aria-label="Direct link to Event sourcing vs Event-Driven Architecture (EDA)" title="Direct link to Event sourcing vs Event-Driven Architecture (EDA)">​</a></h3><p>Event sourcing is seemingly constantly being confused with <a href="https://karanpratapsingh.com/courses/system-design/event-driven-architecture" target="_blank" rel="noopener noreferrer">Event-driven Architecture (EDA)</a>. Event-driven architecture is about using events to communicate between service boundaries. Generally, leveraging a message broker to publish and consume events asynchronously within other boundaries.</p><p>Whereas, event sourcing is about using events as a state, which is a different approach to storing data. Rather than storing the current state, we&#x27;re instead going to be storing events. Also, event sourcing is one of the several patterns to implement an event-driven architecture.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-7">Advantages<a href="#advantages-7" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3><p>Let&#x27;s discuss some advantages of using event sourcing:</p><ul><li>Excellent for real-time data reporting.</li><li>Great for fail-safety, data can be reconstituted from the event store.</li><li>Extremely flexible, any type of message can be stored.</li><li>Preferred way of achieving audit logs functionality for high compliance systems.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-4">Disadvantages<a href="#disadvantages-4" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h3><p>Following are the disadvantages of event sourcing:</p><ul><li>Requires an extremely efficient network infrastructure.</li><li>Requires a reliable way to control message formats, such as a schema registry.</li><li>Different events will contain different payloads.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="command-and-query-responsibility-segregation-cqrs">Command and Query Responsibility Segregation (CQRS)<a href="#command-and-query-responsibility-segregation-cqrs" class="hash-link" aria-label="Direct link to Command and Query Responsibility Segregation (CQRS)" title="Direct link to Command and Query Responsibility Segregation (CQRS)">​</a></h2><p>Command Query Responsibility Segregation (CQRS) is an architectural pattern that divides a system&#x27;s actions into commands and queries. It was first described by <a href="https://twitter.com/gregyoung" target="_blank" rel="noopener noreferrer">Greg Young</a>.</p><p>In CQRS, a <em>command</em> is an instruction, a directive to perform a specific task. It is an intention to change something and doesn&#x27;t return a value, only an indication of success or failure. And, a <em>query</em> is a request for information that doesn&#x27;t change the system&#x27;s state or cause any side effects.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/command-and-query-responsibility-segregation/command-and-query-responsibility-segregation.png" alt="command-and-query-responsibility-segregation" class="img_ev3q"></p><p>The core principle of CQRS is the separation of commands and queries. They perform fundamentally different roles within a system, and separating them means that each can be optimized as needed, which distributed systems can really benefit from.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cqrs-with-event-sourcing">CQRS with Event Sourcing<a href="#cqrs-with-event-sourcing" class="hash-link" aria-label="Direct link to CQRS with Event Sourcing" title="Direct link to CQRS with Event Sourcing">​</a></h3><p>The CQRS pattern is often used along with the Event Sourcing pattern. CQRS-based systems use separate read and write data models, each tailored to relevant tasks and often located in physically separate stores.</p><p>When used with the Event Sourcing pattern, the store of events is the write model and is the official source of information. The read model of a CQRS-based system provides materialized views of the data, typically as highly denormalized views.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-8">Advantages<a href="#advantages-8" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3><p>Let&#x27;s discuss some advantages of CQRS:</p><ul><li>Allows independent scaling of read and write workloads.</li><li>Easier scaling, optimizations, and architectural changes.</li><li>Closer to business logic with loose coupling.</li><li>The application can avoid complex joins when querying.</li><li>Clear boundaries between the system behavior.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-5">Disadvantages<a href="#disadvantages-5" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h3><p>Below are some disadvantages of CQRS:</p><ul><li>More complex application design.</li><li>Message failures or duplicate messages can occur.</li><li>Dealing with eventual consistency is a challenge.</li><li>Increased system maintenance efforts.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases-1">Use cases<a href="#use-cases-1" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">​</a></h3><p>Here are some scenarios where CQRS will be helpful:</p><ul><li>The performance of data reads must be fine-tuned separately from the performance of data writes.</li><li>The system is expected to evolve over time and might contain multiple versions of the model, or where business rules change regularly.</li><li>Integration with other systems, especially in combination with event sourcing, where the temporal failure of one subsystem shouldn&#x27;t affect the availability of the others.</li><li>Better security to ensure that only the right domain entities are performing writes on the data.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-gateway">API Gateway<a href="#api-gateway" class="hash-link" aria-label="Direct link to API Gateway" title="Direct link to API Gateway">​</a></h2><p>The API Gateway is an API management tool that sits between a client and a collection of backend services. It is a single entry point into a system that encapsulates the internal system architecture and provides an API that is tailored to each client. It also has other responsibilities such as authentication, monitoring, load balancing, caching, throttling, logging, etc.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/api-gateway/api-gateway.png" alt="api-gateway" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-do-we-need-an-api-gateway">Why do we need an API Gateway?<a href="#why-do-we-need-an-api-gateway" class="hash-link" aria-label="Direct link to Why do we need an API Gateway?" title="Direct link to Why do we need an API Gateway?">​</a></h3><p>The granularity of APIs provided by microservices is often different than what a client needs. Microservices typically provide fine-grained APIs, which means that clients need to interact with multiple services. Hence, an API gateway can provide a single entry point for all clients with some additional features and better management.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-2">Features<a href="#features-2" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><p>Below are some desired features of an API Gateway:</p><ul><li>Authentication and Authorization</li><li><a href="https://karanpratapsingh.com/courses/system-design/service-discovery" target="_blank" rel="noopener noreferrer">Service discovery</a></li><li><a href="https://karanpratapsingh.com/courses/system-design/proxy#reverse-proxy" target="_blank" rel="noopener noreferrer">Reverse Proxy</a></li><li><a href="https://karanpratapsingh.com/courses/system-design/caching" target="_blank" rel="noopener noreferrer">Caching</a></li><li>Security</li><li>Retry and <a href="https://karanpratapsingh.com/courses/system-design/circuit-breaker" target="_blank" rel="noopener noreferrer">Circuit breaking</a></li><li><a href="https://karanpratapsingh.com/courses/system-design/load-balancing" target="_blank" rel="noopener noreferrer">Load balancing</a></li><li>Logging, Tracing</li><li>API composition</li><li><a href="https://karanpratapsingh.com/courses/system-design/rate-limiting" target="_blank" rel="noopener noreferrer">Rate limiting</a> and throttling</li><li>Versioning</li><li>Routing</li><li>IP whitelisting or blacklisting</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-9">Advantages<a href="#advantages-9" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3><p>Let&#x27;s look at some advantages of using an API Gateway:</p><ul><li>Encapsulates the internal structure of an API.</li><li>Provides a centralized view of the API.</li><li>Simplifies the client code.</li><li>Monitoring, analytics, tracing, and other such features.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-6">Disadvantages<a href="#disadvantages-6" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h3><p>Here are some possible disadvantages of an API Gateway:</p><ul><li>Possible single point of failure.</li><li>Might impact performance.</li><li>Can become a bottleneck if not scaled properly.</li><li>Configuration can be challenging.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backend-for-frontend-bff-pattern">Backend For Frontend (BFF) pattern<a href="#backend-for-frontend-bff-pattern" class="hash-link" aria-label="Direct link to Backend For Frontend (BFF) pattern" title="Direct link to Backend For Frontend (BFF) pattern">​</a></h3><p>In the Backend For Frontend (BFF) pattern, we create separate backend services to be consumed by specific frontend applications or interfaces. This pattern is useful when we want to avoid customizing a single backend for multiple interfaces. This pattern was first described by <a href="https://samnewman.io" target="_blank" rel="noopener noreferrer">Sam Newman</a>.</p><p>Also, sometimes the output of data returned by the microservices to the front end is not in the exact format or filtered as needed by the front end. To solve this issue, the frontend should have some logic to reformat the data, and therefore, we can use BFF to shift some of this logic to the intermediate layer.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/api-gateway/backend-for-frontend.png" alt="backend-for-frontend" class="img_ev3q"></p><p>The primary function of the backend for the frontend pattern is to get the required data from the appropriate service, format the data, and sent it to the frontend.</p><p><em><a href="https://karanpratapsingh.com/courses/system-design/rest-graphql-grpc#graphql" target="_blank" rel="noopener noreferrer">GraphQL</a> performs really well as a backend for frontend (BFF).</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-this-pattern">When to use this pattern?<a href="#when-to-use-this-pattern" class="hash-link" aria-label="Direct link to When to use this pattern?" title="Direct link to When to use this pattern?">​</a></h4><p>We should consider using a Backend For Frontend (BFF) pattern when:</p><ul><li>A shared or general purpose backend service must be maintained with significant development overhead.</li><li>We want to optimize the backend for the requirements of a specific client.</li><li>Customizations are made to a general-purpose backend to accommodate multiple interfaces.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-5">Examples<a href="#examples-5" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3><p>Following are some widely used gateways technologies:</p><ul><li><a href="https://aws.amazon.com/api-gateway" target="_blank" rel="noopener noreferrer">Amazon API Gateway</a></li><li><a href="https://cloud.google.com/apigee" target="_blank" rel="noopener noreferrer">Apigee API Gateway</a></li><li><a href="https://azure.microsoft.com/en-in/services/api-management" target="_blank" rel="noopener noreferrer">Azure API Gateway</a></li><li><a href="https://konghq.com/kong" target="_blank" rel="noopener noreferrer">Kong API Gateway</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rest-graphql-grpc">REST, GraphQL, gRPC<a href="#rest-graphql-grpc" class="hash-link" aria-label="Direct link to REST, GraphQL, gRPC" title="Direct link to REST, GraphQL, gRPC">​</a></h2><p>A good API design is always a crucial part of any system. But it is also important to pick the right API technology. So, in this tutorial, we will briefly discuss different API technologies such as REST, GraphQL, and gRPC.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-an-api">What&#x27;s an API?<a href="#whats-an-api" class="hash-link" aria-label="Direct link to What&#x27;s an API?" title="Direct link to What&#x27;s an API?">​</a></h3><p>Before we even get into API technologies, let&#x27;s first understand what is an API.</p><p>API stands for Application Programming Interface. It is a set of definitions and protocols for building and integrating application software. It&#x27;s sometimes referred to as a contract between an information provider and an information user establishing the content required from the producer and the content required by the consumer.</p><p>In other words, if you want to interact with a computer or system to retrieve information or perform a function, an API helps you communicate what you want to that system so it can understand and complete the request.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rest">REST<a href="#rest" class="hash-link" aria-label="Direct link to REST" title="Direct link to REST">​</a></h3><p>A <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" target="_blank" rel="noopener noreferrer">REST API</a> (also known as RESTful API) is an application programming interface that conforms to the constraints of REST architectural style and allows for interaction with RESTful web services. REST stands for Representational State Transfer and it was first introduced by <a href="https://roy.gbiv.com" target="_blank" rel="noopener noreferrer">Roy Fielding</a> in the year 2000.</p><p><em>In REST API, the fundamental unit is a resource.</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="concepts">Concepts<a href="#concepts" class="hash-link" aria-label="Direct link to Concepts" title="Direct link to Concepts">​</a></h4><p>Let&#x27;s discuss some concepts of a RESTful API.</p><p><strong>Constraints</strong></p><p>In order for an API to be considered <em>RESTful</em>, it has to conform to these architectural constraints:</p><ul><li><strong>Uniform Interface</strong>: There should be a uniform way of interacting with a given server.</li><li><strong>Client-Server</strong>: A client-server architecture managed through HTTP.</li><li><strong>Stateless</strong>: No client context shall be stored on the server between requests.</li><li><strong>Cacheable</strong>: Every response should include whether the response is cacheable or not and for how much duration responses can be cached at the client-side.</li><li><strong>Layered system</strong>: An application architecture needs to be composed of multiple layers.</li><li><strong>Code on demand</strong>: Return executable code to support a part of your application. <em>(optional)</em></li></ul><p><strong>HTTP Verbs</strong></p><p>HTTP defines a set of request methods to indicate the desired action to be performed for a given resource. Although they can also be nouns, these request methods are sometimes referred to as <em>HTTP verbs</em>. Each of them implements a different semantic, but some common features are shared by a group of them.</p><p>Below are some commonly used HTTP verbs:</p><ul><li><strong>GET</strong>: Request a representation of the specified resource.</li><li><strong>HEAD</strong>: Response is identical to a <code>GET</code> request, but without the response body.</li><li><strong>POST</strong>: Submits an entity to the specified resource, often causing a change in state or side effects on the server.</li><li><strong>PUT</strong>: Replaces all current representations of the target resource with the request payload.</li><li><strong>DELETE</strong>: Deletes the specified resource.</li><li><strong>PATCH</strong>: Applies partial modifications to a resource.</li></ul><p><strong>HTTP response codes</strong></p><p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank" rel="noopener noreferrer">HTTP response status codes</a> indicate whether a specific HTTP request has been successfully completed.</p><p>There are five classes defined by the standard:</p><ul><li>1xx - Informational responses.</li><li>2xx - Successful responses.</li><li>3xx - Redirection responses.</li><li>4xx - Client error responses.</li><li>5xx - Server error responses.</li></ul><p>For example, HTTP 200 means that the request was successful.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-10">Advantages<a href="#advantages-10" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h4><p>Let&#x27;s discuss some advantages of REST API:</p><ul><li>Simple and easy to understand.</li><li>Flexible and portable.</li><li>Good caching support.</li><li>Client and server are decoupled.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-7">Disadvantages<a href="#disadvantages-7" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h4><p>Let&#x27;s discuss some disadvantages of REST API:</p><ul><li>Over-fetching of data.</li><li>Sometimes multiple round trips to the server are required.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases-2">Use cases<a href="#use-cases-2" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">​</a></h4><p>REST APIs are pretty much used universally and are the default standard for designing APIs. Overall REST APIs are quite flexible and can fit almost all scenarios.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4><p>Here&#x27;s an example usage of a REST API that operates on a <strong>users</strong> resource.</p><table><thead><tr><th>URI</th><th>HTTP verb</th><th>Description</th></tr></thead><tbody><tr><td>/users</td><td>GET</td><td>Get all users</td></tr><tr><td>/users/<!-- -->{<!-- -->id<!-- -->}</td><td>GET</td><td>Get a user by id</td></tr><tr><td>/users</td><td>POST</td><td>Add a new user</td></tr><tr><td>/users/<!-- -->{<!-- -->id<!-- -->}</td><td>PATCH</td><td>Update a user by id</td></tr><tr><td>/users/<!-- -->{<!-- -->id<!-- -->}</td><td>DELETE</td><td>Delete a user by id</td></tr></tbody></table><p><em>There is so much more to learn when it comes to REST APIs, I will highly recommend looking into <a href="https://en.wikipedia.org/wiki/HATEOAS" target="_blank" rel="noopener noreferrer">Hypermedia as the Engine of Application State (HATEOAS)</a>.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="graphql">GraphQL<a href="#graphql" class="hash-link" aria-label="Direct link to GraphQL" title="Direct link to GraphQL">​</a></h3><p><a href="https://graphql.org" target="_blank" rel="noopener noreferrer">GraphQL</a> is a query language and server-side runtime for APIs that prioritizes giving clients exactly the data they request and no more. It was developed by <a href="https://engineering.fb.com" target="_blank" rel="noopener noreferrer">Facebook</a> and later open-sourced in 2015.</p><p>GraphQL is designed to make APIs fast, flexible, and developer-friendly. Additionally, GraphQL gives API maintainers the flexibility to add or deprecate fields without impacting existing queries. Developers can build APIs with whatever methods they prefer, and the GraphQL specification will ensure they function in predictable ways to clients.</p><p><em>In GraphQL, the fundamental unit is a query.</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="concepts-1">Concepts<a href="#concepts-1" class="hash-link" aria-label="Direct link to Concepts" title="Direct link to Concepts">​</a></h4><p>Let&#x27;s briefly discuss some key concepts in GraphQL:</p><p><strong>Schema</strong></p><p>A GraphQL schema describes the functionality clients can utilize once they connect to the GraphQL server.</p><p><strong>Queries</strong></p><p>A query is a request made by the client. It can consist of fields and arguments for the query. The operation type of a query can also be a <a href="https://graphql.org/learn/queries/#mutations" target="_blank" rel="noopener noreferrer">mutation</a> which provides a way to modify server-side data.</p><p><strong>Resolvers</strong></p><p>Resolver is a collection of functions that generate responses for a GraphQL query. In simple terms, a resolver acts as a GraphQL query handler.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-11">Advantages<a href="#advantages-11" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h4><p>Let&#x27;s discuss some advantages of GraphQL:</p><ul><li>Eliminates over-fetching of data.</li><li>Strongly defined schema.</li><li>Code generation support.</li><li>Payload optimization.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-8">Disadvantages<a href="#disadvantages-8" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h4><p>Let&#x27;s discuss some disadvantages of GraphQL:</p><ul><li>Shifts complexity to server-side.</li><li>Caching becomes hard.</li><li>Versioning is ambiguous.</li><li>N+1 problem.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases-3">Use cases<a href="#use-cases-3" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">​</a></h4><p>GraphQL proves to be essential in the following scenarios:</p><ul><li>Reducing app bandwidth usage as we can query multiple resources in a single query.</li><li>Rapid prototyping for complex systems.</li><li>When we are working with a graph-like data model.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example<a href="#example-1" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4><p>Here&#x27;s a GraphQL schema that defines a <code>User</code> type and a <code>Query</code> type.</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">getUser</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">city</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">state</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Using the above schema, the client can request the required fields easily without having to fetch the entire resource or guess what the API might return.</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token object">getUser</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">city</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will give the following response to the client.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;getUser&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Karan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;city&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;San Francisco&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Learn more about GraphQL at <a href="https://graphql.org" target="_blank" rel="noopener noreferrer">graphql.org</a>.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="grpc">gRPC<a href="#grpc" class="hash-link" aria-label="Direct link to gRPC" title="Direct link to gRPC">​</a></h3><p><a href="https://grpc.io" target="_blank" rel="noopener noreferrer">gRPC</a> is a modern open-source high-performance <a href="https://en.wikipedia.org/wiki/Remote_procedure_call" target="_blank" rel="noopener noreferrer">Remote Procedure Call (RPC)</a> framework that can run in any environment. It can efficiently connect services in and across data centers with pluggable support for load balancing, tracing, health checking, authentication and much more.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="concepts-2">Concepts<a href="#concepts-2" class="hash-link" aria-label="Direct link to Concepts" title="Direct link to Concepts">​</a></h4><p>Let&#x27;s discuss some key concepts of gRPC.</p><p><strong>Protocol buffers</strong></p><p>Protocol buffers provide a language and platform-neutral extensible mechanism for serializing structured data in a forward and backward-compatible way. It&#x27;s like JSON, except it&#x27;s smaller and faster, and it generates native language bindings.</p><p><strong>Service definition</strong></p><p>Like many RPC systems, gRPC is based on the idea of defining a service and specifying the methods that can be called remotely with their parameters and return types. gRPC uses protocol buffers as the <a href="https://en.wikipedia.org/wiki/Interface_description_language" target="_blank" rel="noopener noreferrer">Interface Definition Language (IDL)</a> for describing both the service interface and the structure of the payload messages.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-12">Advantages<a href="#advantages-12" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h4><p>Let&#x27;s discuss some advantages of gRPC:</p><ul><li>Lightweight and efficient.</li><li>High performance.</li><li>Built-in code generation support.</li><li>Bi-directional streaming.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-9">Disadvantages<a href="#disadvantages-9" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h4><p>Let&#x27;s discuss some disadvantages of gRPC:</p><ul><li>Relatively new compared to REST and GraphQL.</li><li>Limited browser support.</li><li>Steeper learning curve.</li><li>Not human readable.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases-4">Use cases<a href="#use-cases-4" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">​</a></h4><p>Below are some good use cases for gRPC:</p><ul><li>Real-time communication via bi-directional streaming.</li><li>Efficient inter-service communication in microservices.</li><li>Low latency and high throughput communication.</li><li>Polyglot environments.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2">Example<a href="#example-2" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4><p>Here&#x27;s a basic example of a gRPC service defined in a <code>*.proto</code> file. Using this definition, we can easily code generate the <code>HelloService</code> service in the programming language of our choice.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">service HelloService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rpc SayHello (HelloRequest) returns (HelloResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message HelloRequest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string greeting = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message HelloResponse {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string reply = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rest-vs-graphql-vs-grpc">REST vs GraphQL vs gRPC<a href="#rest-vs-graphql-vs-grpc" class="hash-link" aria-label="Direct link to REST vs GraphQL vs gRPC" title="Direct link to REST vs GraphQL vs gRPC">​</a></h3><p>Now that we know how these API designing techniques work, let&#x27;s compare them based on the following parameters:</p><ul><li>Will it cause tight coupling?</li><li>How <em>chatty</em> (distinct API calls to get needed information) are the APIs?</li><li>What&#x27;s the performance like?</li><li>How complex is it to integrate?</li><li>How well does the caching work?</li><li>Built-in tooling and code generation?</li><li>What&#x27;s API discoverability like?</li><li>How easy is it to version APIs?</li></ul><table><thead><tr><th>Type</th><th>Coupling</th><th>Chattiness</th><th>Performance</th><th>Complexity</th><th>Caching</th><th>Codegen</th><th>Discoverability</th><th>Versioning</th></tr></thead><tbody><tr><td>REST</td><td>Low</td><td>High</td><td>Good</td><td>Medium</td><td>Great</td><td>Bad</td><td>Good</td><td>Easy</td></tr><tr><td>GraphQL</td><td>Medium</td><td>Low</td><td>Good</td><td>High</td><td>Custom</td><td>Good</td><td>Good</td><td>Custom</td></tr><tr><td>gRPC</td><td>High</td><td>Medium</td><td>Great</td><td>Low</td><td>Custom</td><td>Great</td><td>Bad</td><td>Hard</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="which-api-technology-is-better">Which API technology is better?<a href="#which-api-technology-is-better" class="hash-link" aria-label="Direct link to Which API technology is better?" title="Direct link to Which API technology is better?">​</a></h4><p>Well, the answer is none of them. There is no silver bullet as each of these technologies has its own advantages and disadvantages. Users only care about using our APIs in a consistent way, so make sure to focus on your domain and requirements when designing your API.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="long-polling-websockets-server-sent-events-sse">Long polling, WebSockets, Server-Sent Events (SSE)<a href="#long-polling-websockets-server-sent-events-sse" class="hash-link" aria-label="Direct link to Long polling, WebSockets, Server-Sent Events (SSE)" title="Direct link to Long polling, WebSockets, Server-Sent Events (SSE)">​</a></h2><p>Web applications were initially developed around a client-server model, where the web client is always the initiator of transactions like requesting data from the server. Thus, there was no mechanism for the server to independently send, or push, data to the client without the client first making a request. Let&#x27;s discuss some approaches to overcome this problem.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="long-polling">Long polling<a href="#long-polling" class="hash-link" aria-label="Direct link to Long polling" title="Direct link to Long polling">​</a></h3><p>HTTP Long polling is a technique used to push information to a client as soon as possible from the server. As a result, the server does not have to wait for the client to send a request.</p><p>In Long polling, the server does not close the connection once it receives a request from the client. Instead, the server responds only if any new message is available or a timeout threshold is reached.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/long-polling-websockets-server-sent-events/long-polling.png" alt="long-polling" class="img_ev3q"></p><p>Once the client receives a response, it immediately sends a new request to the server to have a new pending connection to send data to the client, and the operation is repeated. With this approach, the server emulates a real-time server push feature.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="working-2">Working<a href="#working-2" class="hash-link" aria-label="Direct link to Working" title="Direct link to Working">​</a></h4><p>Let&#x27;s understand how long polling works:</p><ol><li>The client makes an initial request and waits for a response.</li><li>The server receives the request and delays sending anything until an update is available.</li><li>Once an update is available, the response is sent to the client.</li><li>The client receives the response and makes a new request immediately or after some defined interval to establish a connection again.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-13">Advantages<a href="#advantages-13" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h4><p>Here are some advantages of long polling:</p><ul><li>Easy to implement, good for small-scale projects.</li><li>Nearly universally supported.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-10">Disadvantages<a href="#disadvantages-10" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h4><p>A major downside of long polling is that it is usually not scalable. Below are some of the other reasons:</p><ul><li>Creates a new connection each time, which can be intensive on the server.</li><li>Reliable message ordering can be an issue for multiple requests.</li><li>Increased latency as the server needs to wait for a new request.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="websockets">WebSockets<a href="#websockets" class="hash-link" aria-label="Direct link to WebSockets" title="Direct link to WebSockets">​</a></h3><p>WebSocket provides full-duplex communication channels over a single TCP connection. It is a persistent connection between a client and a server that both parties can use to start sending data at any time.</p><p>The client establishes a WebSocket connection through a process known as the WebSocket handshake. If the process succeeds, then the server and client can exchange data in both directions at any time. The WebSocket protocol enables the communication between a client and a server with lower overheads, facilitating real-time data transfer from and to the server.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/long-polling-websockets-server-sent-events/websockets.png" alt="websockets" class="img_ev3q"></p><p>This is made possible by providing a standardized way for the server to send content to the client without being asked and allowing for messages to be passed back and forth while keeping the connection open.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="working-3">Working<a href="#working-3" class="hash-link" aria-label="Direct link to Working" title="Direct link to Working">​</a></h4><p>Let&#x27;s understand how WebSockets work:</p><ol><li>The client initiates a WebSocket handshake process by sending a request.</li><li>The request also contains an <a href="https://en.wikipedia.org/wiki/HTTP/1.1_Upgrade_header" target="_blank" rel="noopener noreferrer">HTTP Upgrade</a> header that allows the request to switch to the WebSocket protocol (<code>ws://</code>).</li><li>The server sends a response to the client, acknowledging the WebSocket handshake request.</li><li>A WebSocket connection will be opened once the client receives a successful handshake response.</li><li>Now the client and server can start sending data in both directions allowing real-time communication.</li><li>The connection is closed once the server or the client decides to close the connection.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-14">Advantages<a href="#advantages-14" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h4><p>Below are some advantages of WebSockets:</p><ul><li>Full-duplex asynchronous messaging.</li><li>Better origin-based security model.</li><li>Lightweight for both client and server.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-11">Disadvantages<a href="#disadvantages-11" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h4><p>Let&#x27;s discuss some disadvantages of WebSockets:</p><ul><li>Terminated connections aren&#x27;t automatically recovered.</li><li>Older browsers don&#x27;t support WebSockets (becoming less relevant).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-sent-events-sse">Server-Sent Events (SSE)<a href="#server-sent-events-sse" class="hash-link" aria-label="Direct link to Server-Sent Events (SSE)" title="Direct link to Server-Sent Events (SSE)">​</a></h3><p>Server-Sent Events (SSE) is a way of establishing long-term communication between client and server that enables the server to proactively push data to the client.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/karanpratapsingh/portfolio/master/public/static/courses/system-design/chapter-III/long-polling-websockets-server-sent-events/server-sent-events.png" alt="server-sent-events" class="img_ev3q"></p><p>It is unidirectional, meaning once the client sends the request it can only receive the responses without the ability to send new requests over the same connection.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="working-4">Working<a href="#working-4" class="hash-link" aria-label="Direct link to Working" title="Direct link to Working">​</a></h4><p>Let&#x27;s understand how server-sent events work:</p><ol><li>The client makes a request to the server.</li><li>The connection between client and server is established and it remains open.</li><li>The server sends responses or events to the client when new data is available.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-15">Advantages<a href="#advantages-15" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h4><ul><li>Simple to implement and use for both client and server.</li><li>Supported by most browsers.</li><li>No trouble with firewalls.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-12">Disadvantages<a href="#disadvantages-12" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h4><ul><li>Unidirectional nature can be limiting.</li><li>Limitation for the maximum number of open connections.</li><li>Does not support binary data.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/imwito/imwito.github.io/tree/main/docs/system-design/chapter3.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/system-design/chapter2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Chapter 2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/system-design/chapter4"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chapter 4</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#n-tier-architecture" class="table-of-contents__link toc-highlight">N-tier architecture</a><ul><li><a href="#types-of-n-tier-architectures" class="table-of-contents__link toc-highlight">Types of N-Tier architectures</a></li><li><a href="#advantages" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#disadvantages" class="table-of-contents__link toc-highlight">Disadvantages</a></li></ul></li><li><a href="#message-brokers" class="table-of-contents__link toc-highlight">Message Brokers</a><ul><li><a href="#models" class="table-of-contents__link toc-highlight">Models</a></li><li><a href="#message-brokers-vs-event-streaming" class="table-of-contents__link toc-highlight">Message brokers vs Event streaming</a></li><li><a href="#message-brokers-vs-enterprise-service-bus-esb" class="table-of-contents__link toc-highlight">Message brokers vs Enterprise Service Bus (ESB)</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#message-queues" class="table-of-contents__link toc-highlight">Message Queues</a><ul><li><a href="#working" class="table-of-contents__link toc-highlight">Working</a></li><li><a href="#advantages-1" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#backpressure" class="table-of-contents__link toc-highlight">Backpressure</a></li><li><a href="#examples-1" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#publish-subscribe" class="table-of-contents__link toc-highlight">Publish-Subscribe</a><ul><li><a href="#working-1" class="table-of-contents__link toc-highlight">Working</a></li><li><a href="#advantages-2" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#features-1" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#examples-2" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#enterprise-service-bus-esb" class="table-of-contents__link toc-highlight">Enterprise Service Bus (ESB)</a><ul><li><a href="#advantages-3" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#disadvantages-1" class="table-of-contents__link toc-highlight">Disadvantages</a></li><li><a href="#examples-3" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#monoliths-and-microservices" class="table-of-contents__link toc-highlight">Monoliths and Microservices</a><ul><li><a href="#monoliths" class="table-of-contents__link toc-highlight">Monoliths</a></li><li><a href="#modular-monoliths" class="table-of-contents__link toc-highlight">Modular Monoliths</a></li><li><a href="#microservices" class="table-of-contents__link toc-highlight">Microservices</a></li><li><a href="#beware-of-the-distributed-monolith" class="table-of-contents__link toc-highlight">Beware of the distributed monolith</a></li><li><a href="#microservices-vs-service-oriented-architecture-soa" class="table-of-contents__link toc-highlight">Microservices vs Service-oriented architecture (SOA)</a></li><li><a href="#why-you-dont-need-microservices" class="table-of-contents__link toc-highlight">Why you don&#39;t need microservices</a></li></ul></li><li><a href="#event-driven-architecture-eda" class="table-of-contents__link toc-highlight">Event-Driven Architecture (EDA)</a><ul><li><a href="#what-is-an-event" class="table-of-contents__link toc-highlight">What is an event?</a></li><li><a href="#components" class="table-of-contents__link toc-highlight">Components</a></li><li><a href="#patterns" class="table-of-contents__link toc-highlight">Patterns</a></li><li><a href="#advantages-6" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#challenges" class="table-of-contents__link toc-highlight">Challenges</a></li><li><a href="#use-cases" class="table-of-contents__link toc-highlight">Use cases</a></li><li><a href="#examples-4" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#event-sourcing" class="table-of-contents__link toc-highlight">Event Sourcing</a><ul><li><a href="#event-sourcing-vs-event-driven-architecture-eda" class="table-of-contents__link toc-highlight">Event sourcing vs Event-Driven Architecture (EDA)</a></li><li><a href="#advantages-7" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#disadvantages-4" class="table-of-contents__link toc-highlight">Disadvantages</a></li></ul></li><li><a href="#command-and-query-responsibility-segregation-cqrs" class="table-of-contents__link toc-highlight">Command and Query Responsibility Segregation (CQRS)</a><ul><li><a href="#cqrs-with-event-sourcing" class="table-of-contents__link toc-highlight">CQRS with Event Sourcing</a></li><li><a href="#advantages-8" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#disadvantages-5" class="table-of-contents__link toc-highlight">Disadvantages</a></li><li><a href="#use-cases-1" class="table-of-contents__link toc-highlight">Use cases</a></li></ul></li><li><a href="#api-gateway" class="table-of-contents__link toc-highlight">API Gateway</a><ul><li><a href="#why-do-we-need-an-api-gateway" class="table-of-contents__link toc-highlight">Why do we need an API Gateway?</a></li><li><a href="#features-2" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#advantages-9" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#disadvantages-6" class="table-of-contents__link toc-highlight">Disadvantages</a></li><li><a href="#backend-for-frontend-bff-pattern" class="table-of-contents__link toc-highlight">Backend For Frontend (BFF) pattern</a></li><li><a href="#examples-5" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#rest-graphql-grpc" class="table-of-contents__link toc-highlight">REST, GraphQL, gRPC</a><ul><li><a href="#whats-an-api" class="table-of-contents__link toc-highlight">What&#39;s an API?</a></li><li><a href="#rest" class="table-of-contents__link toc-highlight">REST</a></li><li><a href="#graphql" class="table-of-contents__link toc-highlight">GraphQL</a></li><li><a href="#grpc" class="table-of-contents__link toc-highlight">gRPC</a></li><li><a href="#rest-vs-graphql-vs-grpc" class="table-of-contents__link toc-highlight">REST vs GraphQL vs gRPC</a></li></ul></li><li><a href="#long-polling-websockets-server-sent-events-sse" class="table-of-contents__link toc-highlight">Long polling, WebSockets, Server-Sent Events (SSE)</a><ul><li><a href="#long-polling" class="table-of-contents__link toc-highlight">Long polling</a></li><li><a href="#websockets" class="table-of-contents__link toc-highlight">WebSockets</a></li><li><a href="#server-sent-events-sse" class="table-of-contents__link toc-highlight">Server-Sent Events (SSE)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 imwito, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c8929489.js"></script>
<script src="/assets/js/main.ece51ca9.js"></script>
</body>
</html>